<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AI School Cyber Shield</title>

<style>
body {
    font-family: 'Segoe UI', sans-serif;
    background: radial-gradient(circle at top, #0f172a, #020617);
    color: white;
    text-align: center;
    padding: 40px;
}

h1 {
    font-size: 34px;
    background: linear-gradient(90deg,#38bdf8,#818cf8);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

input {
    width: 60%;
    padding: 14px;
    border-radius: 12px;
    border: 1px solid #334155;
    font-size: 15px;
    background: #1e293b;
    color: white;
}

button {
    padding: 14px 20px;
    margin-left: 8px;
    background: linear-gradient(90deg,#2563eb,#7c3aed);
    color: white;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    font-weight: bold;
    transition: 0.3s;
}

button:hover {
    transform: scale(1.05);
    box-shadow: 0 0 20px #7c3aed;
}

.progress {
    width: 80%;
    height: 35px;
    background-color: #1e293b;
    margin: 30px auto;
    border-radius: 30px;
    overflow: hidden;
}

.progress-bar {
    height: 100%;
    width: 0%;
    text-align: center;
    line-height: 35px;
    color: white;
    font-weight: bold;
    transition: width 0.8s ease;
}

.loading {
    animation: pulse 1s infinite;
}

@keyframes pulse {
    0% {opacity: 0.5;}
    50% {opacity: 1;}
    100% {opacity: 0.5;}
}

#resultText {
    font-size: 20px;
    font-weight: bold;
    margin-top: 15px;
}

#reasonBox {
    margin-top: 20px;
    text-align: left;
    width: 70%;
    margin-left: auto;
    margin-right: auto;
    background: #1e293b;
    padding: 15px;
    border-radius: 15px;
}
</style>
</head>

<body>

<h1>üõ° AI School Cyber Shield</h1>
<p>H·ªá th·ªëng AI ph√¢n t√≠ch r·ªßi ro link</p>

<input type="text" id="urlInput" placeholder="Nh·∫≠p URL (v√≠ d·ª•: https://example.com)">
<button onclick="analyzeURL()">Ph√¢n t√≠ch</button>

<div class="progress">
    <div id="progressBar" class="progress-bar">0%</div>
</div>

<p id="resultText"></p>
<div id="reasonBox"></div>

<script>
async function analyzeURL() {

    const input = document.getElementById("urlInput").value.trim();
    if (!input) return;

    const bar = document.getElementById("progressBar");
    const result = document.getElementById("resultText");
    const reasonBox = document.getElementById("reasonBox");

    // Reset UI
    bar.style.width = "20%";
    bar.innerText = "ƒêang ph√¢n t√≠ch...";
    bar.style.backgroundColor = "#2563eb";
    bar.classList.add("loading");
    result.innerText = "AI ƒëang x·ª≠ l√Ω d·ªØ li·ªáu...";
    reasonBox.innerHTML = "";

    try {
        const response = await fetch("/analyze", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ url: input })
        });

        const data = await response.json();

        const score = data.score;
        const reasons = data.reasons;

        bar.classList.remove("loading");
        bar.style.width = score + "%";
        bar.innerText = score + "%";

        if (score < 30) {
            bar.style.backgroundColor = "green";
            result.innerText = "‚úÖ An to√†n (r·ªßi ro th·∫•p)";
        } 
        else if (score < 70) {
            bar.style.backgroundColor = "orange";
            result.innerText = "‚ö† C·∫ßn xem x√©t k·ªπ";
        } 
        else {
            bar.style.backgroundColor = "red";
            result.innerText = "üö® Nguy c∆° phishing cao";
        }

        if (reasons.length > 0) {
            reasonBox.innerHTML = "<h3>Chi ti·∫øt ph√¢n t√≠ch:</h3><ul>" +
                reasons.map(r => "<li>" + r + "</li>").join("") +
                "</ul>";
        } else {
            reasonBox.innerHTML = "<h3>Kh√¥ng ph√°t hi·ªán d·∫•u hi·ªáu ƒë√°ng ng·ªù r√µ r√†ng.</h3>";
        }

    } catch (error) {
        bar.classList.remove("loading");
        bar.style.backgroundColor = "red";
        result.innerText = "L·ªói k·∫øt n·ªëi server!";
    }
}
</script>

</body>
</html>
